1st 

try {
    const { userId } = req.params;

    const incomeResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS income FROM transactions
      WHERE user_id = ${userId} AND category = 'income'
    `;
 
    const expenseResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS expense FROM transactions
      WHERE user_id = ${userId} AND category = 'expense'
    `;
    const income = parseFloat(incomeResult[0].income);
    const expense = parseFloat(expenseResult[0].expense);
    const balance = income - expense;

    res.status(200).json({
      balance,
      income,
      expense
    });
  } catch (error) {
    console.log("Error getting the summary  ", error);
    res.status(500).json({ message: "internal server error" });
  }







2nd



   try {
    const {userId} =req.params

    const incomeResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS income FROM transactions
      WHERE user_id = ${userId} AND category = 'income'
    `;
    const expenseResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS expense FROM transactions
      WHERE user_id = ${userId} AND category = 'expense'
    `;
    const income = parseFloat(incomeResult[0].income);
    const expense = parseFloat(expenseResult[0].expense);
    const balance = income - expense;
    res.status(200).json({
      balance,
      income,
      expense
    });




    3r it  is working 
      const {userId} =req.params

    const incomeResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS income FROM transactions
      WHERE user_id = ${userId} AND category = 'income'
    `;
    const expenseResult = await sql`
      SELECT COALESCE(SUM(amount), 0) AS expense FROM transactions
      WHERE user_id = ${userId} AND category = 'expense'
    `;
    const income = parseFloat(incomeResult[0].income);
    const expense = parseFloat(expenseResult[0].expense);
    const balance = income - expense;
    res.status(200).json({
      balance,
      income,
      expense
    });